{% load static %}

<link rel="stylesheet" type="text/css" href="{% static 'obfuscator/style.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'obfuscator/header.css' %}">

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Photo Obfuscator</title>
    <script src="http://code.jquery.com/jquery-3.1.1.slim.min.js"></script>
     <script src="../../static/obfuscator/jquery.loading.block.js"></script>
  <head>

  <body>
    <div class="topnav">
      <div class="topnav-centered">
       <div class="search">Photo Obfuscator</div>
      </div>

      <!-- Right-aligned links -->
      <div class="topnav-right">
        <div class="search"><i>Participant ID:   </i><u>{{ participant.participant_id}}</u></div>
      </div>
    </div>

    <div class="main-area">
      <div class="grid">
          <div class="column">Original photo
            <img src="{{ photo.participant_photo.url}}">
            <div class="small-text"><i>Filename: </i><u>{{ photo.participant_photo.name}}</u></div>
          </div>

          <div class="column">Faces located
              <img src="{{ photo.participant_faces.url}}">
              <form method="POST">
                  {% csrf_token %}
                  <table>
                    {{ form.as_table }}
                  </table>
                  <button type="submit" >Obfuscate selected</button>
              </form>
              <form method = "post" enctype="multipart/form-data">
                  {% csrf_token %}
                  <table>
                    {{ photo_form.as_table }}
                  </table>
                  <button type="submit" onclick="showLoadingMsg()">Upload</button>
              </form>
          </div>

          {% if display %}
              <div class="column">Blurring
                <img src="{{ photo.participant_blur.url}}">
              </div>

              <div class="column">Pixelation
                <img src="{{ photo.participant_pixel.url}}">
              </div>

              <div class="column">DeepFake
                <img src="{{ photo.participant_deepfake.url}}">
              </div>

              <div class="column">Masking
                <img src="{{ photo.participant_masked.url}}">
              </div>
          {% endif %}
      </div>
    </div>

    <script type="text/javascript" charset="utf-8">
      function showLoadingMsg() {
        var show=document.getElementById("id_participant_photo").files.length;
        console.log(show);
        if (show === 1 ){
          $.loadingBlockShow({
              imgPath: '../../static/obfuscator/icon.gif'
          });
        }
       };
    </script>
  </body>
</html>
